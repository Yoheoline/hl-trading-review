# System Evolution — エキスパート集団の自律進化

## 理念
**我々はエキスパートトレード集団である。**
自分たちで学び、自分たちで改善し、自分たちで進化する。
壊れたら自分で直す。足りなければ自分で作る。止まることだけが許されない。

## 概要
Hyperliquid Trading Systemが自律的に自分自身を改善するための仕組み。
新機能追加だけでなく、既存システムのチューニング・見直しも含む。

## 権限

### 資金移動権限（2026-01-30 よーさんから付与）
- Account 1〜4間の資金移動は自律的に判断・実行してOK
- `node transfer.js --from N --to N --amount X` で実行
- 用途: リスク分散、成績ベースの資金再配分
- ⚠️ アカウント数の変更はCEO承認必須（hard-limits.md参照）

### 自律改善レベル（2026-01-30 COO体制 + hard-limits準拠）
| レベル | 内容 | 自律度 | 参照 |
|--------|------|--------|------|
| L1 | パラメータ最適化（±20%以内） | 🟢 Auto | hard-limits.md |
| L2 | 新戦略/フィルター追加 | 🟢 Auto（PR経由） | — |
| L3 | 構造変更（アカウント追加、レバレッジ等） | 🔴 CEO承認必須 | hard-limits.md 絶対不変 |

**JARVIS（COO）は監視・判断・対処のみ。作業は各部署が実行。**
- L1/L2: Trade Reviewer / Strategy Optimizer / System Architect が実行
- L3: CEOに提案 → 承認後に実行
- 安全策: GitHub feature branch + テスト + マージ
- 壊れたら即revert
- 変更はPDCA履歴テーブルに記録必須

## 実行タイミング

### 週次 System Review（日曜 11:00）
システム全体の俯瞰レビュー。大きな改善はIssue化。

### 日次 Trade Review拡張（22:00）
トレード振り返り + 小さな改善の即時実装。

### 随時（Heartbeat内）
気づいた改善点をメモ → `memory/hyperliquid/improvement-backlog.md`

## レビュー観点

### 1. パフォーマンス分析
- 週次/月次の勝率・PnL推移
- 戦略別の成績比較
- 時間帯別の成績
- ドローダウンの深さと回復時間

### 2. 既存システムのチューニング
- **バックテスト探索**: 1回の探索数、テスト期間、サンプル数は最適か
- **Cron頻度**: 各トレーダーの実行間隔は適切か
- **TP/SL設定**: 固定値 vs 動的（ATRベース等）
- **ポジションサイズ**: 固定 vs Kelly基準 vs Volatility-adjusted
- **戦略ローテーション**: 成績が悪化した戦略の自動退役
- **探索アルゴリズム**: ランダム+ヒルクライム → ベイズ最適化、遺伝的アルゴリズム等
- **データ期間**: テストの長さ、ウォークフォワード比率
- **APIコスト**: キャンドルデータのキャッシュ、不要な呼び出し削減

### 3. 新機能・インフラ
- 新しいインジケーター・フィルター
- リスク管理の強化（相関チェック、最大ドローダウン制限）
- 監視・アラートの改善
- エラーハンドリング・リカバリー
- ログ・分析ツールの改善

### 4. 学習・知識
- Web検索で新しいトレード手法を発見
- 負けパターンから教訓を抽出
- 他のトレーダー/ボットの戦略を研究
- 市場構造の変化に適応

## GitHub Issue管理

### ラベル体系
- `enhancement`: 新機能追加
- `tuning`: 既存システムのチューニング
- `bug`: バグ修正
- `risk`: リスク管理関連
- `performance`: パフォーマンス改善
- `research`: 調査・研究

### 優先度
- P0: 即座にPR作成（損失に直結する問題）
- P1: 今週中にPR（成績改善が見込める）
- P2: 来週以降（nice to have）
- P3: バックログ（いつかやる）

## 週次レポートフォーマット

```markdown
# 🔄 Weekly System Review - YYYY-MM-DD

## 📊 今週の成績
- 総PnL: $XX.XX
- 勝率: XX%
- トレード数: XX
- 最大ドローダウン: $XX.XX

## 🏆 戦略別成績
| 戦略 | PnL | 勝率 | トレード数 |
|------|-----|------|-----------|

## 🔍 発見した改善点
1. [P1] ○○のチューニングで成績向上見込み
2. [P2] △△の追加で新しいエッジ獲得可能

## 📋 作成したIssue/PR
- Issue #XX: ○○の改善
- PR #XX: △△の実装

## 💡 来週のアクション
- [ ] ○○の検証
- [ ] △△の実装
```

## 改善実装フロー

```
改善点を発見
    ↓
improvement-backlog.md に記録
    ↓
GitHub Issue作成（ラベル + 優先度）
    ↓
P0/P1: 即座にfeature branch → 実装 → テスト → PR
P2/P3: バックログに蓄積 → 週次レビューで優先度見直し
    ↓
PR作成（バックテスト結果付き）
    ↓
マージ → mainに反映 → 次のCronサイクルで使用
```
